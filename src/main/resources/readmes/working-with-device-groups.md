## Часть 4: Работа с группами устройств

Добавьте в свой проект следующую зависимость:

```sbtshell
    libraryDependencies += "com.typesafe.akka" %% "akka-actor" % "2.5.17"
```

### Введение

Давайте подробнее рассмотрим основные функции, необходимые для нашего использования. В полной системе IoT для контроля 
температуры дома, шаги для подключения датчика устройства к нашей системе могут выглядеть так:

1. _Датчик в доме подключается через какой-либо протокол;_
2. _Соединение с компонентом, управляющее сетевыми соединениями, принимает соединение;_
3. Датчик предоставляет идентификатор группы и устройства для регистрации в компоненте диспетчера устройств нашей системы;
4. Компонент диспетчера устройств обрабатывает регистрацию, просматривая или создавая актора, ответственного за сохранение
 состояния датчика;
5. Актор отвечает подтверждением, раскрывая его `ActorRef`;
6. Сетевой компонент теперь использует `ActorRef` для связи между датчиком и актором устройства, не проходя через диспетчер устройств.

Шаги 1 и 2 проходят за пределами нашей учебной системы. В этой главе мы рассмотрим шаги 3-6 и создадим способ регистрации 
датчиков в нашей системе и для общения с участниками. Но во-первых, у нас есть еще одно архитектурное решение - сколько 
уровней участников мы должны использовать для представления групп устройств и датчиков устройств?

Одной из основных проблем дизайна для программистов Akka является выбор лучшей детализации для акторов. На практике, 
в зависимости от характористик взаимодействия между участниками, обычно существует несколько правильных способов организации 
системы. Например, в нашем прецеденте возможно, чтобы один актор поддерживал все группы и устройства - возможно, используя 
хэш-отображения. Было бы также разумно иметь актора для каждой группы, которая отслеживает состояние всех устройств в одном доме.

Следующие рекомендации помогут нам выбрать наиболее подходящую иерархию акторов:

* **Более крупная детализация предпочтительна**. Внедрение более мелких участников вызывает больше проблем, чем решает.
* Добавьте более тонкую детализацию, когда система требует:
   * Высший параллелизм.
   * Комплексные взаимодействия между акторами, которые имеют многжество состояний. Мы увидим очень хороший пример этого 
   в следующей главе.
   * Достаточное состояние, которое имеет смысл разделить на более мелких акторов.
   * Множество несвязанных обязанностей. Использование отдельных участников позволяет людям терпеть неудачу и 
   восстанавливаться, оказывая небольшое влияние на других.



_Если этот проект окажется полезным тебе - нажми на кнопочку **`★`** в правом верхнем углу._

[<= содержание](https://github.com/steklopod/akka/blob/akka_starter/readme.md)