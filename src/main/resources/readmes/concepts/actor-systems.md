## Системы акторов

Акторы - это объекты, которые инкапсулируют состояние и поведение, они обмениваются исключительно обменом сообщениями, 
которые помещаются в почтовый ящик получателя. В некотором смысле, акторы являются наиболее строгой формой 
объектно-ориентированного программирования, но лучше всего рассматривать их как людей: при моделировании решения с 
акторами, представляя группу людей и назначая подзадачи им, организуйте их функции в организационной структуры и думать 
о том, как эскалировать неудачу (все с выгодой от того, чтобы не иметь дело с людьми, а это значит, что мы не должны 
заботиться о своем эмоциональном состоянии или моральных проблемах). Результат может затем служить в качестве умственного 
леса для создания программного обеспечения.

>ActorSystem - это тяжеловесная структура, которая будет выделять 1 ... N потоков, поэтому создавайте по одному для 
каждого логического приложения.

### Иерархическая структура
Как и в экономической организации, субъекты естественным образом формируют иерархии. Один актор, который должен 
контролировать определенную функцию в программе, может захотеть разбить свою задачу на более мелкие, более управляемые 
части. Для этой цели он запускает дочерних акторов, которых он контролирует. В то время как подробности наблюдений 
объясняются здесь, мы сосредоточимся на базовых концепциях в этом разделе. Единственное обязательное условие - знать, 
что у каждого актора есть ровно один руководитель, который является его создателем.

Квинтэссенцией функций акторских систем является то, что задачи разделяются и делегируются до тех пор, пока они не станут
 достаточно маленькими, чтобы обрабатываться в одной части. При этом не только сама задача четко структурирована, но и 
 результирующие субъекты могут быть обоснованы в отношении того, какие сообщения они должны обрабатывать, как они должны 
 реагировать нормально и как с ошибкой следует обращаться. Если у одного из участников нет средств для решения 
 определенной ситуации, он отправляет соответствующее сообщение об ошибке своему руководителю, прося о помощи. 
 Рекурсивная структура затем позволяет обрабатывать сбой на правильном уровне.

Сравните это с многоуровневым программным обеспечением, которое легко переходит в защитное программирование с целью не 
пропустить какой-либо отказ: если проблема передается правильному человеку, можно найти лучшее решение, чем пытаться 
сохранить все «под ковром».

Теперь сложность в разработке такой системы заключается в том, как решить, кто должен контролировать что. Нет единственного
 наилучшего решения, но есть несколько рекомендаций, которые могут быть полезны:

* Если один актор управляет работой, которую делает другой актор, например, передавая подзадачи, менеджер должен 
контролировать ребенка. Причина в том, что менеджер знает, какие отказы ожидаются и как их обрабатывать.
* Если один актор несет очень важные данные (т.е. его состояние не может быть потеряно, если его можно избежать), этот 
актор должен испускать любые возможные опасные подзадачи детям, над которыми он контролирует и обрабатывает неудачи 
этих детей по мере необходимости. В зависимости от характора запросов лучше всего создать нового ребенка для каждого 
запроса, что упростит управление состоянием для сбора ответов. Это называется «Образ ядра ошибок» от Erlang.
* Если один из участников зависит от другого актора за выполнение своей обязанности, он должен следить за своей 
активностью и действовать после получения уведомления о прекращении действия. Это отличается от надзора, поскольку 
наблюдающая сторона не влияет на стратегию супервайзера, и следует отметить, что только функциональная зависимость не 
является критерием для определения места размещения определенного дочернего субъекта в иерархии.

Всегда есть исключения из этих правил, но независимо от того, соблюдаете ли вы правила или нарушаете их, у вас всегда 
должна быть причина.

### Контейнер конфигурации
Акторская система как совместный ансамбль акторов является естественной единицей для управления общими средствами, 
такими как планирование услуг, настройка, ведение журнала и т. Д. Несколько акторских систем с различными конфигурациями 
могут сосуществовать в одной и той же JVM без проблем, нет глобального общего состояния в самой Акке. Соедините это с 
прозрачной связью между акторскими системами - внутри одного узла или через сетевое соединение - чтобы увидеть, что сами 
системы акторов могут использоваться как строительные блоки в функциональной иерархии.

### Лучшие практики актора
* Акторы должны быть похожими на хороших сотрудников: эффективно выполнять свою работу, не беспокоя всех остальных без 
необходимости и избегать использования ресурсов. В переводе на программирование это означает обработку событий и 
генерирование ответов (или более запросов) в зависимости от событий. Акторы не должны блокировать (т.е. Пассивно ждать 
при занятии Thread) на каком-то внешнем объекте, который может быть блокировкой, сетевым сокетом и т.е., Если только это не неизбежно; в последнем случае см. ниже.
* Не пропускайте изменчивые объекты между акторами. Чтобы обеспечить это, предпочитайте непреложные сообщения. Если инкапсуляция акторов нарушается, выставляя их изменяемое состояние снаружи, вы возвращаетесь в обычную среду параллелизма Java со всеми недостатками.
* Акторы сделаны контейнерами для поведения и состояния, охватывая это средство, чтобы не отправлять сообщения по-разному в сообщениях (что может вызвать соблазн с помощью закрытий Scala). Одним из рисков является случайное разделение изменчивого состояния между участниками, и это нарушение модели актора, к сожалению, нарушает все свойства, которые делают программирование у акторов таким приятным опытом.
* Акторы верхнего уровня - это самая внутренняя часть вашего ядра ошибок, поэтому создавайте их экономно и предпочитайте по-настоящему иерархические системы. Это имеет преимущества в отношении обработки ошибок (как с учетом детализации конфигурации, так и с точки зрения производительности), а также снижает нагрузку на актора-опекуна, что является одной точкой раздора, если она используется чрезмерно.

### Что вы не должны беспокоиться
Акторская система управляет ресурсами, которые она настроена для использования для запуска действующих в ней участников. 
В одной из таких систем могут быть миллионы акторов, ведь мантра рассматривает их как обильные, и они взвешиваются с 
накладными расходами всего лишь примерно на 300 байт на экземпляр. Естественно, что точный порядок обработки сообщений в 
больших системах не контролируется автором приложения, но это также не предназначено. Сделайте шаг назад и расслабьтесь, 
в то время как Акка делает тяжелую работу под капотом.


_Если этот проект окажется полезным тебе - нажми на кнопочку **`★`** в правом верхнем углу._

[<= содержание](https://github.com/steklopod/akka/blob/akka_starter/readme.md)